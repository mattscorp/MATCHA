<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <title>Matcha - <%=info.first_name %></title>
        <link href="/styles/styles.css" rel="stylesheet" type="text/css">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    </head>
 
    <body>
        <div class="container-fluid">
            <div id="0">
        	   <% include partials/nav %>
            </div>
            <h1>Infos de <strong class="first_letter"><%= info.first_name %></strong></h1>

            <h2>Photo de profil</h2>
            <div>
                <img class="account_image rounded" src=<%= info.profile_picture %> >
            </div>
            <form action="change_password" method="get">
                <input class="btn btn-dark" type="submit" value="Changer mon mot de passe">
            </form>
            <div class="row">
                <div class="col-sm-8">
                    <form action="change_infos" method="post">
                        <h2>Informations personnelles</h2>
                        <p>Pseudo : </p>
                        <input required type="text" class="form-control" name="login" value="<%= info.login%>" />
                        <p>Prénom : </p>
                        <input required type="text" class="form-control" name="first_name" value="<%= info.first_name%>" />
                        <p>Nom : </p>
                        <input required type="text" class="form-control" name="last_name" value="<%= info.last_name%>" />
                        <p>Email : </p>
                        <input required type="email" class="form-control" name="email" value="<%= info.email%>" />
                        <p>Age : </p>
                        <input required type="number" class="form-control" min="18" max="120" name="age" value="<%= info.age%>" />
                </div>
                <div class="col-sm-4">
                        <h2>Informations de dating</h2>
                        <p>Genre : </p>
                        <select name="gender" size="1">
                            <option <% if (info.gender == 'Femme') { %> selected="selected" <% }%> >Femme</option>
                            <option <% if (info.gender == 'Homme') { %> selected="selected" <% }%> >Homme</option>
                            <option <% if (info.gender == 'Autre') { %> selected="selected" <% }%> >Autre</option>
                        </select>
                        <p>Orientation : </p>
                        <select name="orientation" size="1">
                            <option <% if (info.orientation == 'Femmes') { %> selected="selected" <% }%> >Femmes</option>
                            <option <% if (info.orientation == 'Hommes') { %> selected="selected" <% }%> >Hommes</option>
                            <option <% if (info.orientation == 'Bi') { %> selected="selected" <% }%> >Bi</option>
                            <option <% if (info.orientation == 'Autres') { %> selected="selected" <% }%> >Autre</option>
                        </select>
                        <p>Bio : </p>
                        <input required class="form-control" type="text" name="bio" value="<%= info.bio %>" />
                        <br/>
                </div>             
            </div>
            <div>
                    <input class="btn btn-dark btn-block" type="submit" name="submit" value="Modifier mes informations" />
                </form>
            </div>

            <h2>Centres d'intérêts</h2>
            <div>
                <p>Tes centres d'intérêts :</p>
                <% interests.forEach(function(elem) { %>
                    <form action="delete_interest" method="post">
                        <p>#<%= elem.topic %></p>
                        <input type="hidden" name="topic" value="<%= elem.topic %>">
                        <input class="modify_button" type="image" src="/resources/delete.jpeg" title="submit">
                    </form>
                <% }); %>
                <form action="new_topic" method="post">
                    <input required type="text" name="new_topic">
                    <input class="btn btn-dark" type="submit" name="submit" value="Ajouter un topic">
                </form>
            </div>
        

            <h2>Photos</h2>
            <div>
                <p>Photo de profil : </p>
                <form action="change_profile_picture" method="post">
                    <select name="profile_picture" size="1">
                        <%if (info.image_1 != null) { %>
                            <option <% if (info.image_1 == info.profile_picture) { %> selected="selected" <% }%> >Photo 1</option>
                        <% } if (info.image_2 != null) { %>
                            <option <% if (info.image_2 == info.profile_picture) { %> selected="selected" <% }%> >Photo 2</option>
                        <% } if (info.image_3 != null) { %>
                            <option <% if (info.image_3 == info.profile_picture) { %> selected="selected" <% }%> >Photo 3</option>
                        <% } if (info.image_4 != null) { %>
                            <option <% if (info.image_4 == info.profile_picture) { %> selected="selected" <% }%> >Photo 4</option>
                        <% } if (info.image_5 != null) { %>
                            <option <% if (info.image_5 == info.profile_picture) { %> selected="selected" <% }%> >Photo 5</option>
                        <% } %>
                    </select>
                    <input class="btn btn-dark" type="submit" value="Définir comme photo de profil">
                </form>
                <% if (info.image_1 == null || info.image_3 == null || info.image_3 == null || info.image_4 == null || info.image_5 == null) { %>
                    <p>Ajouter une photo :</p>
                    <form action="add_new_image" method="post" enctype="multipart/form-data">
                        <input class="btn btn-outline-dark" required type="file" accept="image/png, image/jpeg" name="photo">
                        <input class="btn btn-dark" type="submit" value="Ajouter">
                    </form>
                <% } if (info.image_1 != null) { %>
                <p>Image 1 : </p>
                <img class="account_image" src=<%= info.image_1 %> >
                <form action="delete_image" method="post">
                        <input type="hidden" name="photo" value="1">
                        <input type="image" class="modify_button" src="/resources/delete.jpeg" title="submit">
                    </form>
                <% } if (info.image_2 != null) { %>
                    <p>Image 2 : </p>
                    <img class="account_image" src=<%= info.image_2 %> >
                    <form action="delete_image" method="post">
                        <input type="hidden" name="photo" value="2">
                        <input type="image" class="modify_button" src="/resources/delete.jpeg" title="submit">
                    </form>
                <% } if (info.image_3 != null) { %>
                    <p>Image 3 : </p>
                    <img class="account_image" src=<%= info.image_3 %> >
                    <form action="delete_image" method="post">
                        <input type="hidden" name="photo" value="3">
                        <input type="image" class="modify_button" src="/resources/delete.jpeg" title="submit">
                    </form>
                <% } if (info.image_4 != null) { %>
                    <p>Image 4 : </p>
                    <img class="account_image" src=<%= info.image_4 %> >
                    <form action="delete_image" method="post">
                        <input type="hidden" name="photo" value="4">
                        <input type="image" class="modify_button" src="/resources/delete.jpeg" title="submit">
                    </form>
                <% } if (info.image_5 != null) { %>
                    <p>Image 5 : </p>
                    <img class="account_image" src=<%= info.image_5 %> >
                    <form action="delete_image" method="post">
                        <input type="hidden" name="photo" value="5">
                        <input type="image" class="modify_button" src="/resources/delete.jpeg" title="submit">
                    </form>
                <% } %>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        setInterval('load_geo()', 3000);
        function load_geo() {
            $.getJSON('http://www.geoplugin.net/json.gp?jsoncallback=?', function(data) {
                $.post('geo', data, function(data) {
                });
            });
        }
        setInterval('updateDiv()', 3000);
        function updateDiv() { 
            $( "#0" ).load(window.location.href + " #0" );
        }
    </script>
</html>